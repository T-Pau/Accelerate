description Test function expansion
arguments -c --target 6502 a.s
file a.s <inline>
.section code
test {
    lda foo
label:
.private next = label + 1
    nop
}
end-of-inline-data
file a.o {} <inline>
.format_version 1.0
.target "6502"
.constant next {
    visibility: private
    value: ((test+.label_offset(test, label))+$01)
}
.object test {
    visibility: private
    section: code
    body <
        .if .in_range($00, $ff, foo)
          .data $a5, foo:1
        .else
          .data $ad, foo:2
        .end
      label:
        .data $ea
    >
}
end-of-inline-data
